########################################################################
#
# This is the esphome config file for my front door camera.
# It features a camera, a pir, a connection to the bell and
# two reed switches to detect new mail and emptying the mail.
#
# Module in use: TTGO T-Camera ESP32-WROVER-B OV2640 Camera Module
#
# @author Tom Schneider (https://vigonotion.com)
#
########################################################################

esphome:
  name: front_door
  platform: ESP32
  board: ttgo-t-beam

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
ota:
logger:

binary_sensor:
  # Motion
  - platform: gpio
    pin: GPIO33
    name: front_door_motion
    device_class: motion
    filters:
      - delayed_on: 10ms
      - delayed_off: 20s

  # Bell
  - platform: gpio
    pin:
      number: GPIO34
      inverted: True
    name: front_door_bell
    filters:
      - delayed_on: 10ms
      - delayed_off: 5s

  # Mailbox (new) 
  - platform: gpio
    pin:
      number: GPIO21
      inverted: True
    name: mailbox_new
    filters:
      - delayed_on: 10ms
      - delayed_off: 2s

  # Mailbox (emptied) 
  - platform: gpio
    pin:
      number: GPIO22
      inverted: True
    name: mailbox_emptied
    filters:
      - delayed_on: 10ms
      - delayed_off: 2s

esp32_camera:
  name: front_door
  external_clock:
    pin: GPIO32
    frequency: 20MHz
  i2c_pins:
    sda: GPIO13
    scl: GPIO12
  data_pins: [GPIO5, GPIO14, GPIO4, GPIO15, GPIO18, GPIO23, GPIO36, GPIO39]
  vsync_pin: GPIO27
  href_pin: GPIO25
  pixel_clock_pin: GPIO19
  power_down_pin: 26
  resolution: 640x480
  jpeg_quality: 10